<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />
 <meta name="google-site-verification" content="75RBwHq1pWFvK2E7wuVgAeq_LOOJrU4q1wRIjXqPpqg" />  <!-- Google Analytics Intentionally Disabled -->  <!-- Cookie Banner Intentionally Disabled --> 
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AprilTag Advanced Use &mdash; FIRST Tech Challenge Docs 0.3 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/theme.css" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/tooltipster.custom.css" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/tooltipster.bundle.min.css" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/tooltipster-sideTip-shadow.min.css" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/tooltipster-sideTip-punk.min.css" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/tooltipster-sideTip-noir.min.css" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/tooltipster-sideTip-light.min.css" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/tooltipster-sideTip-borderless.min.css" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/micromodal.css" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/ftc-rtd.css" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/sphinx_rtd_theme.css" />
      <link rel="stylesheet" type="text/css" href="../../../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
      <link rel="stylesheet" type="text/css" href="../../../_static/dark_mode_css/general.css" />
      <link rel="stylesheet" type="text/css" href="../../../_static/dark_mode_css/dark.css" />

  
    <link rel="shortcut icon" href="../../../_static/FIRSTicon_RGB_withTM.ico"/>
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/js/hoverxref.js"></script>
        <script src="../../../_static/js/tooltipster.bundle.min.js"></script>
        <script src="../../../_static/js/micromodal.min.js"></script>
        <script src="../../../_static/js/external-links-new-tab.js"></script>
        <script src="../../../_static/js/adjust-css-vars.js"></script>
        <script src="../../../_static/design-tabs.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
        <script src="../../../_static/dark_mode_js/default_light.js"></script>
        <script src="../../../_static/dark_mode_js/theme_switcher.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Webcams for Vision Portal" href="../visionportal_webcams/visionportal-webcams.html" />
    <link rel="prev" title="Vision MultiPortal" href="../vision_multiportal/vision-multiportal.html" /> 
</head>

<body class="wy-body-for-nav"> 


<div class="header-bar">
        <!-- Color Strip -->
        <div class="color-strip">
            <div class="fred"></div>
            <div class="forange"></div>
            <div class="fblue"></div>
        </div>
        <div class="link-bar-container">
            <div id="link-bar" class="collapse">
                <ul>          
			<li id="ftc-page-link"><a href="https://www.firstinspires.org/resource-library/ftc/game-and-season-info" target="_blank"><i>FIRST</i> Official Team Resources</a></li>
                  <li id="qa-link"><a href="https://ftc-qa.firstinspires.org/" target="_blank">Official Game Q&A</a></li>
                </ul>
            </div>
        </div>
</div>

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../index.html" class="icon icon-home">
            FIRST Tech Challenge Docs
              <img src="../../../_static/FIRSTTech_iconHorz_RGB_reverse.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                0.3.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../overview/ftcoverview.html">About the <em>FIRST</em> Tech Challenge</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../gracious_professionalism/gp.html"><em>Gracious Professionalism®</em></a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../persona_pages/rookie_teams/rookie_teams.html">New Teams</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../persona_pages/veteran_teams/veteran_teams.html">Returning Teams</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../persona_pages/coach_admin/coach_admin.html">Coach (Administrative) Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../persona_pages/mentor_tech/mentor_tech.html">Technical Mentor Resources</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Game and Season-Specific Resources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../game_specific_resources/blog/blog.html"><em>FIRST</em> Tech Challenge Blog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tech_tips/tech-tips.html"><em>FIRST</em> Tech Challenge Tech Tips</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ai/innovation_corner/innovation-corner.html">AI Innovation Corner</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../manuals/game_manuals/game_manuals.html">Competition Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../game_specific_resources/ftcqa/ftcqa.html">Game Q&amp;A System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../game_specific_resources/playing_field_resources/playing_field_resources.html">Playing Field Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../game_specific_resources/field_coordinate_system/field-coordinate-system.html">Field Coordinate System</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Software Development Kit (SDK)</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../programming_resources/laptops/laptops.html">Laptop Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ftc_sdk/overview/index.html">SDK Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ftc_sdk/updating/index.html">Updating Components</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Control System Resources</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../programming_resources/shared/control_system_intro/The-FTC-Control-System.html">Control System Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../control_hard_compon/index.html">Hardware Component Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../hardware_and_software_configuration/index.html">Hardware and Software Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../hardware_and_software_configuration/self_inspect/new-self-inspect.html"><em>FIRST</em> Tech Challenge Self-Inspect</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../hardware_and_software_configuration/self_inspect/self-inspect.html">Old Self-Inspect</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../programming_resources/index.html">Programming Resources</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../programming_resources/index.html#programming-tutorials">Programming Tutorials</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../programming_resources/index.html#supporting-documentation">Supporting Documentation</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../../programming_resources/index.html#apriltag-programming">AprilTag Programming</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../apriltag_intro/apriltag-intro.html">AprilTag Introduction</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../visionportal_overview/visionportal-overview.html">VisionPortal Overview</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="../apriltag_intro/apriltag-intro.html">AprilTag Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="../vision_processor_init/vision-processor-init.html">Vision Processor Initialization</a></li>
<li class="toctree-l4"><a class="reference internal" href="../visionportal_init/visionportal-init.html">VisionPortal Initialization</a></li>
<li class="toctree-l4"><a class="reference internal" href="../visionportal_previews/visionportal-previews.html">VisionPortal Previews</a></li>
<li class="toctree-l4"><a class="reference internal" href="../apriltag_id_code/apriltag-id-code.html">AprilTag ID Codes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../apriltag_metadata/apriltag-metadata.html">AprilTag Metadata</a></li>
<li class="toctree-l4"><a class="reference internal" href="../apriltag_reference_frame/apriltag-reference-frame.html">AprilTag Reference Frame</a></li>
<li class="toctree-l4"><a class="reference internal" href="../apriltag_camera_calibration/apriltag-camera-calibration.html">AprilTag Camera Calibration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../apriltag_pose/apriltag-pose.html">AprilTag Pose</a></li>
<li class="toctree-l4"><a class="reference internal" href="../apriltag_library/apriltag-library.html">AprilTag Library</a></li>
<li class="toctree-l4"><a class="reference internal" href="../visionportal_cpu_and_bandwidth/visionportal-cpu-and-bandwidth.html">VisionPortal CPU and Bandwidth</a></li>
<li class="toctree-l4"><a class="reference internal" href="../visionportal_camera_controls/visionportal-camera-controls.html">VisionPortal Camera Controls</a></li>
<li class="toctree-l4"><a class="reference internal" href="../vision_multiportal/vision-multiportal.html">Vision Multiportal</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">AprilTag Advanced Use</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l5"><a class="reference internal" href="#optional-metadata">Optional Metadata</a></li>
<li class="toctree-l5"><a class="reference internal" href="#raw-pose-values">Raw Pose Values</a></li>
<li class="toctree-l5"><a class="reference internal" href="#advanced-cpu-management">Advanced CPU Management</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../visionportal_webcams/visionportal-webcams.html">Webcams for VisionPortal</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../understanding_apriltag_detection_values/understanding-apriltag-detection-values.html">Understanding AprilTag Values</a></li>
<li class="toctree-l3"><a class="reference internal" href="../apriltag_localization/apriltag-localization.html">AprilTag Localization</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../opmode_test_images/opmode-test-images.html">AprilTag Test Images</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../apriltag_tips/decode_apriltag/decode-apriltag.html">AprilTag Challenges in DECODE presented by RTX</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../programming_resources/index.html#tensorflow-programming">TensorFlow Programming</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../programming_resources/index.html#vision-programming">Vision Programming</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../programming_resources/index.html#camera-color-processing">Camera Color Processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../programming_resources/index.html#advanced-topics">Advanced Topics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../programming_resources/index.html#java-tutorials">Java Tutorials</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../programming_resources/index.html#additional-first-website-resources">Additional <em>FIRST</em> Website Resources</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Programming Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../programming_resources/shared/choosing_program_lang/choosing-program-lang.html">Choosing a Programming Tool</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../programming_resources/blocks/Blocks-Tutorial.html">Blocks Programming Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../programming_resources/onbot_java/OnBot-Java-Tutorial.html">OnBot Java Programming Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../programming_resources/android_studio_java/Android-Studio-Tutorial.html">Android Studio Programming Tutorial</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">AprilTag Resources</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../apriltag_intro/apriltag-intro.html">AprilTag Introduction</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../visionportal_overview/visionportal-overview.html">VisionPortal Overview</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../apriltag_intro/apriltag-intro.html">AprilTag Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../vision_processor_init/vision-processor-init.html">Vision Processor Initialization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../visionportal_init/visionportal-init.html">VisionPortal Initialization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../visionportal_previews/visionportal-previews.html">VisionPortal Previews</a></li>
<li class="toctree-l2"><a class="reference internal" href="../apriltag_id_code/apriltag-id-code.html">AprilTag ID Codes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../apriltag_metadata/apriltag-metadata.html">AprilTag Metadata</a></li>
<li class="toctree-l2"><a class="reference internal" href="../apriltag_reference_frame/apriltag-reference-frame.html">AprilTag Reference Frame</a></li>
<li class="toctree-l2"><a class="reference internal" href="../apriltag_camera_calibration/apriltag-camera-calibration.html">AprilTag Camera Calibration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../apriltag_pose/apriltag-pose.html">AprilTag Pose</a></li>
<li class="toctree-l2"><a class="reference internal" href="../apriltag_library/apriltag-library.html">AprilTag Library</a></li>
<li class="toctree-l2"><a class="reference internal" href="../visionportal_cpu_and_bandwidth/visionportal-cpu-and-bandwidth.html">VisionPortal CPU and Bandwidth</a></li>
<li class="toctree-l2"><a class="reference internal" href="../visionportal_camera_controls/visionportal-camera-controls.html">VisionPortal Camera Controls</a></li>
<li class="toctree-l2"><a class="reference internal" href="../vision_multiportal/vision-multiportal.html">Vision Multiportal</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">AprilTag Advanced Use</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="#optional-metadata">Optional Metadata</a></li>
<li class="toctree-l3"><a class="reference internal" href="#raw-pose-values">Raw Pose Values</a></li>
<li class="toctree-l3"><a class="reference internal" href="#advanced-cpu-management">Advanced CPU Management</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../visionportal_webcams/visionportal-webcams.html">Webcams for VisionPortal</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../understanding_apriltag_detection_values/understanding-apriltag-detection-values.html">Understanding AprilTag Values</a></li>
<li class="toctree-l1"><a class="reference internal" href="../apriltag_localization/apriltag-localization.html">AprilTag Localization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../opmode_test_images/opmode-test-images.html">AprilTag Test Images</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">CAD Resources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../cad_resources/index.html">Computer Aided Design (CAD)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Electrostatic Discharge</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../hardware_and_software_configuration/configuring/managing_esd/managing-esd.html">Managing ESD Effects</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Manufacturing</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../manufacturing/index.html">Manufacturing Methods</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Team Resources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../faq/faqs.html">Common Team FAQs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../sponsors/software/software.html">Team Complimentary Software</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../sponsors/discounts/discounts.html">Team Discounts</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">FTC Docs</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../booklets/index.html">Booklets</a></li>
<li class="toctree-l1"><a class="reference external" href="https://ftc-docs.firstinspires.org/projects/ftcdocs-archive/en/latest/index.html">Archive</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ftc_docs/form/form.html">Site Feedback Form</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../contrib/index.html">Contributing to FTC Docs</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">FIRST Tech Challenge Docs</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../../programming_resources/index.html">Programming Resources</a></li>
          <li class="breadcrumb-item"><a href="../visionportal_overview/visionportal-overview.html">VisionPortal Overview</a></li>
      <li class="breadcrumb-item active">AprilTag Advanced Use</li>
<li class="wy-breadcrumbs-aside" style="padding-inline-start: 6px;">
</li>

      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/apriltag/vision_portal/apriltag_advanced_use/apriltag-advanced-use.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="apriltag-advanced-use">
<h1>AprilTag Advanced Use<a class="headerlink" href="#apriltag-advanced-use" title="Permalink to this heading"></a></h1>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this heading"></a></h2>
<p>This page will offer tips for <em>FIRST</em> Tech Challenge teams seeking more info
about specialized features of the new VisionPortal.</p>
</section>
<section id="optional-metadata">
<h2>Optional Metadata<a class="headerlink" href="#optional-metadata" title="Permalink to this heading"></a></h2>
<p>An AprilTag Library tag can store two optional <strong>Metadata</strong> fields (of
these Blocks/Java types):</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">fieldPosition</span></code>: tag location on the game field (<code class="docutils literal notranslate"><span class="pre">VectorF</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">fieldOrientation</span></code>: tag orientation on the game field (<code class="docutils literal notranslate"><span class="pre">Quaternion</span></code>)</p></li>
</ul>
<p>The reference frame is the <em>FIRST</em> Tech Challenge <strong>Field Coordinate System</strong>,
provided here:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../../../game_specific_resources/field_coordinate_system/field-coordinate-system.html#reference-frame"><span class="std std-ref">Field Coordinate System</span></a></p></li>
</ul>
<p>Here is a simple graphic showing the <em>FIRST</em> Tech Challenge global axes that
apply to <strong>every game, every season</strong>:</p>
<figure class="align-center" id="id1">
<a class="reference internal image-reference" href="../../../_images/FTC-Global-Coordinates.png"><img alt="Field Coordinates" src="../../../_images/FTC-Global-Coordinates.png" style="width: 75%;" /></a>
<figcaption>
<p><span class="caption-text">Image Credit: Phil Malone</span><a class="headerlink" href="#id1" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>With a tag’s <strong>field position</strong> and <strong>orientation</strong> specified in advance
as Metadata, the tag’s pose data could be used by an advanced OpMode to
calculate the robot’s position on the field. This conversion math, an
exercise for the reader, can allow a robot to use the tag’s pose data
in real-time to navigate to the desired location on the field.</p>
</section>
<section id="raw-pose-values">
<h2>Raw Pose Values<a class="headerlink" href="#raw-pose-values" title="Permalink to this heading"></a></h2>
<p>The frame of reference described at the <strong>AprilTag Reference Frame</strong>
page is provided <strong>by default</strong> in the new 8.2 SDK.</p>
<p>Advanced teams may prefer to perform their own pose calculations, based
on <strong>raw values</strong> from the AprilTag/EasyOpenCV pipeline.</p>
<p>Those raw values are available to Java and Blocks programmers. The Java
version is shown here:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">AprilTagDetection</span><span class="w"> </span><span class="n">detection</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">aprilTag</span><span class="p">.</span><span class="na">getDetections</span><span class="p">())</span><span class="w">  </span><span class="p">{</span>

<span class="w">     </span><span class="n">Orientation</span><span class="w"> </span><span class="n">rot</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Orientation</span><span class="p">.</span><span class="na">getOrientation</span><span class="p">(</span><span class="n">detection</span><span class="p">.</span><span class="na">rawPose</span><span class="p">.</span><span class="na">R</span><span class="p">,</span><span class="w"> </span><span class="n">AxesReference</span><span class="p">.</span><span class="na">INTRINSIC</span><span class="p">,</span><span class="w"> </span><span class="n">AxesOrder</span><span class="p">.</span><span class="na">XYZ</span><span class="p">,</span><span class="w"> </span><span class="n">AngleUnit</span><span class="p">.</span><span class="na">DEGREES</span><span class="p">);</span>

<span class="w">     </span><span class="c1">// Original source data</span>
<span class="w">     </span><span class="kt">double</span><span class="w"> </span><span class="n">poseX</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">detection</span><span class="p">.</span><span class="na">rawPose</span><span class="p">.</span><span class="na">x</span><span class="p">;</span>
<span class="w">     </span><span class="kt">double</span><span class="w"> </span><span class="n">poseY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">detection</span><span class="p">.</span><span class="na">rawPose</span><span class="p">.</span><span class="na">y</span><span class="p">;</span>
<span class="w">     </span><span class="kt">double</span><span class="w"> </span><span class="n">poseZ</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">detection</span><span class="p">.</span><span class="na">rawPose</span><span class="p">.</span><span class="na">z</span><span class="p">;</span>

<span class="w">     </span><span class="kt">double</span><span class="w"> </span><span class="n">poseAX</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rot</span><span class="p">.</span><span class="na">firstAngle</span><span class="p">;</span>
<span class="w">     </span><span class="kt">double</span><span class="w"> </span><span class="n">poseAY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rot</span><span class="p">.</span><span class="na">secondAngle</span><span class="p">;</span>
<span class="w">     </span><span class="kt">double</span><span class="w"> </span><span class="n">poseAZ</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rot</span><span class="p">.</span><span class="na">thirdAngle</span><span class="p">;</span>
<span class="w">     </span><span class="p">}</span>
</pre></div>
</div>
<p>These raw values are converted by the SDK to the default interface, as
follows:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">detection</span><span class="p">.</span><span class="na">rawPose</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w">   </span><span class="p">{</span>
<span class="w">     </span><span class="n">detection</span><span class="p">.</span><span class="na">ftcPose</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">AprilTagPoseFtc</span><span class="p">();</span>

<span class="w">     </span><span class="n">detection</span><span class="p">.</span><span class="na">ftcPose</span><span class="p">.</span><span class="na">x</span><span class="w"> </span><span class="o">=</span><span class="w">  </span><span class="n">detection</span><span class="p">.</span><span class="na">rawPose</span><span class="p">.</span><span class="na">x</span><span class="p">;</span>
<span class="w">     </span><span class="n">detection</span><span class="p">.</span><span class="na">ftcPose</span><span class="p">.</span><span class="na">y</span><span class="w"> </span><span class="o">=</span><span class="w">  </span><span class="n">detection</span><span class="p">.</span><span class="na">rawPose</span><span class="p">.</span><span class="na">z</span><span class="p">;</span>
<span class="w">     </span><span class="n">detection</span><span class="p">.</span><span class="na">ftcPose</span><span class="p">.</span><span class="na">z</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">-</span><span class="n">detection</span><span class="p">.</span><span class="na">rawPose</span><span class="p">.</span><span class="na">y</span><span class="p">;</span>

<span class="w">     </span><span class="n">Orientation</span><span class="w"> </span><span class="n">rot</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Orientation</span><span class="p">.</span><span class="na">getOrientation</span><span class="p">(</span><span class="n">detection</span><span class="p">.</span><span class="na">rawPose</span><span class="p">.</span><span class="na">R</span><span class="p">,</span><span class="w"> </span><span class="n">AxesReference</span><span class="p">.</span><span class="na">INTRINSIC</span><span class="p">,</span><span class="w"> </span><span class="n">AxesOrder</span><span class="p">.</span><span class="na">YXZ</span><span class="p">,</span><span class="w"> </span><span class="n">outputUnitsAngle</span><span class="p">);</span>
<span class="w">     </span><span class="n">detection</span><span class="p">.</span><span class="na">ftcPose</span><span class="p">.</span><span class="na">yaw</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">-</span><span class="n">rot</span><span class="p">.</span><span class="na">firstAngle</span><span class="p">;</span>
<span class="w">     </span><span class="n">detection</span><span class="p">.</span><span class="na">ftcPose</span><span class="p">.</span><span class="na">roll</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rot</span><span class="p">.</span><span class="na">thirdAngle</span><span class="p">;</span>
<span class="w">     </span><span class="n">detection</span><span class="p">.</span><span class="na">ftcPose</span><span class="p">.</span><span class="na">pitch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rot</span><span class="p">.</span><span class="na">secondAngle</span><span class="p">;</span>

<span class="w">     </span><span class="n">detection</span><span class="p">.</span><span class="na">ftcPose</span><span class="p">.</span><span class="na">range</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Math</span><span class="p">.</span><span class="na">hypot</span><span class="p">(</span><span class="n">detection</span><span class="p">.</span><span class="na">ftcPose</span><span class="p">.</span><span class="na">x</span><span class="p">,</span><span class="w"> </span><span class="n">detection</span><span class="p">.</span><span class="na">ftcPose</span><span class="p">.</span><span class="na">y</span><span class="p">);</span>
<span class="w">     </span><span class="n">detection</span><span class="p">.</span><span class="na">ftcPose</span><span class="p">.</span><span class="na">bearing</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">outputUnitsAngle</span><span class="p">.</span><span class="na">fromUnit</span><span class="p">(</span><span class="n">AngleUnit</span><span class="p">.</span><span class="na">RADIANS</span><span class="p">,</span><span class="w"> </span><span class="n">Math</span><span class="p">.</span><span class="na">atan2</span><span class="p">(</span><span class="o">-</span><span class="n">detection</span><span class="p">.</span><span class="na">ftcPose</span><span class="p">.</span><span class="na">x</span><span class="p">,</span><span class="w"> </span><span class="n">detection</span><span class="p">.</span><span class="na">ftcPose</span><span class="p">.</span><span class="na">y</span><span class="p">));</span>
<span class="w">     </span><span class="n">detection</span><span class="p">.</span><span class="na">ftcPose</span><span class="p">.</span><span class="na">elevation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">outputUnitsAngle</span><span class="p">.</span><span class="na">fromUnit</span><span class="p">(</span><span class="n">AngleUnit</span><span class="p">.</span><span class="na">RADIANS</span><span class="p">,</span><span class="w"> </span><span class="n">Math</span><span class="p">.</span><span class="na">atan2</span><span class="p">(</span><span class="n">detection</span><span class="p">.</span><span class="na">ftcPose</span><span class="p">.</span><span class="na">z</span><span class="p">,</span><span class="w"> </span><span class="n">detection</span><span class="p">.</span><span class="na">ftcPose</span><span class="p">.</span><span class="na">y</span><span class="p">));</span>
<span class="w">     </span><span class="p">}</span>
</pre></div>
</div>
<p>Further discussion is provided here:</p>
<p><a class="reference internal" href="../../understanding_apriltag_detection_values/understanding-apriltag-detection-values.html#understanding-apriltag-detection-values"><span class="std std-ref">Understanding AprilTag Detection Values</span></a></p>
</section>
<section id="advanced-cpu-management">
<h2>Advanced CPU Management<a class="headerlink" href="#advanced-cpu-management" title="Permalink to this heading"></a></h2>
<p>This section continues from the <strong>VisionPortal CPU and Bandwidth</strong> page, which
covered many basic tools for avoiding limits of CPU usage and USB bandwidth.</p>
<p>To evaluate multiple factors, changing at the same time, a customized Test
OpMode can be very useful.  This section provides an example that allows <strong>live
gamepad control</strong> to:</p>
<ul class="simple">
<li><p>toggle AprilTag Processor on and off</p></li>
<li><p>toggle TFOD Processor on and off</p></li>
<li><p>toggle LiveView on and off</p></li>
<li><p>toggle Streaming on and off</p></li>
</ul>
<p>Other features of this Test OpMode include:</p>
<ul class="simple">
<li><p>All controls are independent, to explore the combinations and their effect on
frame rate (FPS).</p></li>
<li><p>The previews can be observed, and detections/recognitions can be monitored
via annotations and Telemetry.</p></li>
<li><p>Frame rate is provided in LiveView and DS Telemetry.</p></li>
<li><p>The Telemetry functions include an alternate for getting <strong>all</strong> or <strong>only
fresh</strong> detections/recognitions.</p></li>
</ul>
<p>This Test OpMode can be downloaded for <a class="reference external" href="https://gist.github.com/WestsideRobotics/ea7540175b11d07bf362cb9625a54042">FTC
Blocks</a>
or
<a class="reference external" href="https://gist.github.com/WestsideRobotics/8566a1148dee6572084a6dea2b0d5627">Java</a>.
The Blocks version is shown below; right-click to open in a new browser tab and
zoom in.</p>
<figure class="align-center" id="id2">
<a class="reference internal image-reference" href="../../../_images/100-VisionPortal-Test-v01.png"><img alt="VisionPortal Example Code" src="../../../_images/100-VisionPortal-Test-v01.png" style="width: 75%;" /></a>
<figcaption>
<p><span class="caption-text">VisionPortal Example OpMode</span><a class="headerlink" href="#id2" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>The OpMode uses “Webcam 1”, or change <code class="docutils literal notranslate"><span class="pre">USE_WEBCAM</span></code> for a built-in RC phone
camera.  For Control Hub, set up an HDMI monitor or <a class="reference external" href="https://github.com/Genymobile/scrcpy">scrcpy</a>.  Follow the DS gamepad button guide.</p>
<p>At that <strong>VisionPortal CPU and Bandwidth</strong> page, four tools mentioned were not
discussed:</p>
<ul class="simple">
<li><p>set decimation (down-sampling)</p></li>
<li><p>select a pose solver algorithm</p></li>
<li><p>get all or only fresh detections from the AprilTag Processor</p></li>
<li><p>get all or only fresh recognitions from the TFOD Processor</p></li>
</ul>
<p>For now, these are left for interested Blocks and Java users to research and
investigate.  In time, more information may be posted at this page.</p>
<p>All of the above features are easily found in the relevant <strong>FTC Blocks</strong>
toolbox, or palette, under the Vision category.</p>
<p><strong>Java</strong> users should review the VisionPortal interface at the <a class="reference external" href="https://javadoc.io/doc/org.firstinspires.ftc/Vision/latest/overview-summary.html">SDK Javadocs</a>
site.  Click <strong>FRAMES</strong> for easy navigation.</p>
<hr class="docutils" />
<p><em>Questions, comments and corrections to westsiderobotics&#64;verizon.net</em></p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../vision_multiportal/vision-multiportal.html" class="btn btn-neutral float-left" title="Vision MultiPortal" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../visionportal_webcams/visionportal-webcams.html" class="btn btn-neutral float-right" title="Webcams for Vision Portal" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo" style="display: flex">
  
    <div id="container" style="width: 50%; white-space:nowrap;">

      <div>
        &#169; 2025 <i>FIRST</i>
      </div>

      <div>
        <p><a href="../../../tos/tos.html">Terms of Service</a></p>
      </div>
      <div>
        <p><a class="external" href="https://www.firstinspires.org/privacy-policy">Privacy Policy</a></p>
      </div>
      <div>
        <p><a class="external" href="https://www.firstinspires.org/programs/youth-protection-program">Report an Incident</a></p>
      </div>

      <div>
      </div>
    </div>

    <div align="right" style='flex-grow:1; text-align: right'>
      Season Presenting Sponsor
      <figure>
        <img src="../../../_static/RTX.png" alt="RTX" class="invert-img" width="200" align="right"/>
      </figure>
    </div>
  </div>
<!--
  <div> 
  </div>
  -->
</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

</body>
</html>