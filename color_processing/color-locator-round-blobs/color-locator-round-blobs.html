<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />
 <meta name="google-site-verification" content="75RBwHq1pWFvK2E7wuVgAeq_LOOJrU4q1wRIjXqPpqg" />  <!-- Google Analytics Intentionally Disabled -->  <!-- Cookie Banner Intentionally Disabled --> 
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Color Locator (Round Blobs) &mdash; FIRST Tech Challenge Docs 0.3 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/tooltipster.custom.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/tooltipster.bundle.min.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/tooltipster-sideTip-shadow.min.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/tooltipster-sideTip-punk.min.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/tooltipster-sideTip-noir.min.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/tooltipster-sideTip-light.min.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/tooltipster-sideTip-borderless.min.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/micromodal.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/ftc-rtd.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/sphinx_rtd_theme.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/dark_mode_css/general.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/dark_mode_css/dark.css" />

  
    <link rel="shortcut icon" href="../../_static/FIRSTicon_RGB_withTM.ico"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/js/hoverxref.js"></script>
        <script src="../../_static/js/tooltipster.bundle.min.js"></script>
        <script src="../../_static/js/micromodal.min.js"></script>
        <script src="../../_static/js/external-links-new-tab.js"></script>
        <script src="../../_static/js/adjust-css-vars.js"></script>
        <script src="../../_static/design-tabs.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
        <script src="../../_static/dark_mode_js/default_light.js"></script>
        <script src="../../_static/dark_mode_js/theme_switcher.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Color Spaces" href="../color-spaces/color-spaces.html" />
    <link rel="prev" title="Color Locator (Challenge)" href="../color-locator-challenge/color-locator-challenge.html" /> 
</head>

<body class="wy-body-for-nav"> 


<div class="header-bar">
        <!-- Color Strip -->
        <div class="color-strip">
            <div class="fred"></div>
            <div class="forange"></div>
            <div class="fblue"></div>
        </div>
        <div class="link-bar-container">
            <div id="link-bar" class="collapse">
                <ul>          
			<li id="ftc-page-link"><a href="https://www.firstinspires.org/resource-library/ftc/game-and-season-info" target="_blank"><i>FIRST</i> Official Team Resources</a></li>
                  <li id="qa-link"><a href="https://ftc-qa.firstinspires.org/" target="_blank">Official Game Q&A</a></li>
                </ul>
            </div>
        </div>
</div>

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            FIRST Tech Challenge Docs
              <img src="../../_static/FIRSTTech_iconHorz_RGB_reverse.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                0.3.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../overview/ftcoverview.html">About the <em>FIRST</em> Tech Challenge</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../gracious_professionalism/gp.html"><em>Gracious Professionalism®</em></a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../persona_pages/rookie_teams/rookie_teams.html">New Teams</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../persona_pages/veteran_teams/veteran_teams.html">Returning Teams</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../persona_pages/coach_admin/coach_admin.html">Coach (Administrative) Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../persona_pages/mentor_tech/mentor_tech.html">Technical Mentor Resources</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Game and Season-Specific Resources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../game_specific_resources/blog/blog.html"><em>FIRST</em> Tech Challenge Blog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tech_tips/tech-tips.html"><em>FIRST</em> Tech Challenge Tech Tips</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ai/innovation_corner/innovation-corner.html">AI Innovation Corner</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../manuals/game_manuals/game_manuals.html">Competition Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../game_specific_resources/ftcqa/ftcqa.html">Game Q&amp;A System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../game_specific_resources/playing_field_resources/playing_field_resources.html">Playing Field Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../game_specific_resources/field_coordinate_system/field-coordinate-system.html">Field Coordinate System</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Software Development Kit (SDK)</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../programming_resources/laptops/laptops.html">Laptop Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ftc_sdk/overview/index.html">SDK Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ftc_sdk/updating/index.html">Updating Components</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Control System Resources</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../programming_resources/shared/control_system_intro/The-FTC-Control-System.html">Control System Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../control_hard_compon/index.html">Hardware Component Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hardware_and_software_configuration/index.html">Hardware and Software Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hardware_and_software_configuration/self_inspect/new-self-inspect.html"><em>FIRST</em> Tech Challenge Self-Inspect</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hardware_and_software_configuration/self_inspect/self-inspect.html">Old Self-Inspect</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../programming_resources/index.html">Programming Resources</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../programming_resources/index.html#programming-tutorials">Programming Tutorials</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../programming_resources/index.html#supporting-documentation">Supporting Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../programming_resources/index.html#apriltag-programming">AprilTag Programming</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../programming_resources/index.html#tensorflow-programming">TensorFlow Programming</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../programming_resources/index.html#vision-programming">Vision Programming</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../programming_resources/index.html#camera-color-processing">Camera Color Processing</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../index.html">Color Processing Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../color-sensor/color-sensor.html">Color Processing Color Sensor</a></li>
<li class="toctree-l3"><a class="reference internal" href="../color-blob-concepts/color-blob-concepts.html">Color Blob Concepts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../color-locator-discover/color-locator-discover.html">Color Locator (Discover)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../color-locator-explore/color-locator-explore.html">Color Locator (Explore)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../color-locator-challenge/color-locator-challenge.html">Color Locator (Challenge)</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Color Locator (Round Blobs)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#quick-start">Quick Start</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ds-and-rc-previews">DS and RC Previews</a></li>
<li class="toctree-l4"><a class="reference internal" href="#basic-telemetry-data">Basic Telemetry Data</a></li>
<li class="toctree-l4"><a class="reference internal" href="#using-circlefit-data">Using CircleFit Data</a></li>
<li class="toctree-l4"><a class="reference internal" href="#manage-the-previews">Manage the Previews</a></li>
<li class="toctree-l4"><a class="reference internal" href="#manage-erode-and-dilate">Manage Erode and Dilate</a></li>
<li class="toctree-l4"><a class="reference internal" href="#improving-results">Improving Results</a></li>
<li class="toctree-l4"><a class="reference internal" href="#lighting-challenges">Lighting Challenges</a></li>
<li class="toctree-l4"><a class="reference internal" href="#opmode-development">OpMode Development</a></li>
<li class="toctree-l4"><a class="reference internal" href="#summary">Summary</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../color-spaces/color-spaces.html">Color Spaces</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../programming_resources/index.html#advanced-topics">Advanced Topics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../programming_resources/index.html#java-tutorials">Java Tutorials</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../programming_resources/index.html#additional-first-website-resources">Additional <em>FIRST</em> Website Resources</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Programming Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../programming_resources/shared/choosing_program_lang/choosing-program-lang.html">Choosing a Programming Tool</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../programming_resources/blocks/Blocks-Tutorial.html">Blocks Programming Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../programming_resources/onbot_java/OnBot-Java-Tutorial.html">OnBot Java Programming Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../programming_resources/android_studio_java/Android-Studio-Tutorial.html">Android Studio Programming Tutorial</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">AprilTag Resources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../apriltag/vision_portal/apriltag_intro/apriltag-intro.html">AprilTag Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../apriltag/vision_portal/visionportal_overview/visionportal-overview.html">VisionPortal Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../apriltag/vision_portal/visionportal_webcams/visionportal-webcams.html">Webcams for VisionPortal</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../apriltag/understanding_apriltag_detection_values/understanding-apriltag-detection-values.html">Understanding AprilTag Values</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../apriltag/vision_portal/apriltag_localization/apriltag-localization.html">AprilTag Localization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../apriltag/opmode_test_images/opmode-test-images.html">AprilTag Test Images</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">CAD Resources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../cad_resources/index.html">Computer Aided Design (CAD)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Electrostatic Discharge</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../hardware_and_software_configuration/configuring/managing_esd/managing-esd.html">Managing ESD Effects</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Manufacturing</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../manufacturing/index.html">Manufacturing Methods</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Team Resources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../faq/faqs.html">Common Team FAQs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sponsors/software/software.html">Team Complimentary Software</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sponsors/discounts/discounts.html">Team Discounts</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">FTC Docs</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../booklets/index.html">Booklets</a></li>
<li class="toctree-l1"><a class="reference external" href="https://ftc-docs.firstinspires.org/projects/ftcdocs-archive/en/latest/index.html">Archive</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ftc_docs/form/form.html">Site Feedback Form</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contrib/index.html">Contributing to FTC Docs</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">FIRST Tech Challenge Docs</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../programming_resources/index.html">Programming Resources</a></li>
          <li class="breadcrumb-item"><a href="../index.html">Color Processing Introduction</a></li>
      <li class="breadcrumb-item active">Color Locator (Round Blobs)</li>
<li class="wy-breadcrumbs-aside" style="padding-inline-start: 6px;">
</li>

      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/color_processing/color-locator-round-blobs/color-locator-round-blobs.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="color-locator-round-blobs">
<h1>Color Locator (Round Blobs)<a class="headerlink" href="#color-locator-round-blobs" title="Permalink to this heading"></a></h1>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this heading"></a></h2>
<p>FTC’s “Color Locator” now offers a best-fit circle called <code class="docutils literal notranslate"><span class="pre">circleFit</span></code>, an alternate to the best-fit rectangle (“boxFit”) described in previous sections of this tutorial.</p>
<figure class="align-center" id="id1">
<a class="reference internal image-reference" href="../../_images/10-circleFit-and-boxFit.png"><img alt="Images showing circlefit and boxfit best-fit algorithms" src="../../_images/10-circleFit-and-boxFit.png" style="width: 75%;" /></a>
<figcaption>
<p><span class="caption-text">circleFit versus boxFit detection</span><a class="headerlink" href="#id1" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>This page describes the new Sample OpMode called <code class="docutils literal notranslate"><span class="pre">ConceptVisionColorLocator_Circle</span></code>, in FTC Blocks and Java.  These notes assume familiarity with the original Sample OpMode, now called <code class="docutils literal notranslate"><span class="pre">ConceptVisionColorLocator_Rectangle</span></code>.</p>
<p>The new <code class="docutils literal notranslate"><span class="pre">_Circle</span></code> Sample uses these settings for convenient processing of DECODE Artifacts:</p>
<ul class="simple">
<li><p>increase Erode and Dilate areas from 5 to 15 pixels</p></li>
<li><p>change order of Erode and Dilate</p></li>
<li><p>draw <code class="docutils literal notranslate"><span class="pre">circleFit</span></code> preview</p></li>
<li><p>Telemetry shows only Circularity, Radius and Center</p></li>
</ul>
<p>As an alternate, the <code class="docutils literal notranslate"><span class="pre">_Rectangle</span></code> Sample OpMode can still be used and modified to process objects of any shape, including round balls, with access to the same attributes.</p>
</section>
<section id="quick-start">
<h2>Quick Start<a class="headerlink" href="#quick-start" title="Permalink to this heading"></a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This and other steps here were previously described in detail, starting with the page called <a class="reference internal" href="../color-locator-discover/color-locator-discover.html"><span class="doc">Color Locator - Discover</span></a>.</p>
</div>
<ol class="arabic simple">
<li><p>In FTC Blocks or Java, create a new Autonomous OpMode from the Sample <code class="docutils literal notranslate"><span class="pre">ConceptVisionColorLocator_Circle</span></code>.</p></li>
<li><p>On the Driver Station, select the OpMode that you just saved or built.</p></li>
<li><p>Turn off the automatic 30-second match timer (green slider).  Aim the camera at a DECODE <strong>Purple Artifact</strong>, or a picture of one.</p></li>
<li><p>Touch INIT only. The OpMode should give Telemetry showing the results of one or more Blobs:</p></li>
</ol>
<figure class="align-center" id="id2">
<a class="reference internal image-reference" href="../../_images/20-circleFit-telemetry.png"><img alt="Image showing circle fit telemetry output on Driver Station App" src="../../_images/20-circleFit-telemetry.png" style="width: 75%;" /></a>
<figcaption>
<p><span class="caption-text">Circle Fit Telemetry from <code class="docutils literal notranslate"><span class="pre">ConceptVisionColorLocator_Circle</span></code> sample</span><a class="headerlink" href="#id2" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>In this example, Telemetry reports only one Blob in the Region of Interest (ROI), of the default target color ARTIFACT_PURPLE.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The Sample OpModes <cite>_Circle</cite> and <cite>_Rectangle</cite> also offer the custom color ARTIFACT_GREEN.</p>
</div>
<p>Move the camera around, and watch the Telemetry area on the Driver Station screen.  It may sometimes show more lines of Blob data, and sometimes show no Blob data at all.</p>
<p>It’s working!  Your camera is working as a <strong>color locator</strong>.  Think about how to use this in the DECODE game.</p>
</section>
<section id="ds-and-rc-previews">
<h2>DS and RC Previews<a class="headerlink" href="#ds-and-rc-previews" title="Permalink to this heading"></a></h2>
<p>Before studying the telemetry data more closely (below), make sure you can see the <strong>previews</strong> of the OpenCV results.  Previewing is essential for working with vision code.</p>
<p>The Driver Station (DS) “snapshot” preview is available at the <code class="docutils literal notranslate"><span class="pre">Camera</span> <span class="pre">Stream</span></code> menu choice, with the OpMode in INIT.</p>
<figure class="align-center" id="id3">
<a class="reference internal image-reference" href="../../_images/30-circleFit-CameraStream.png"><img alt="Image showing circle fit camera stream output on Driver Station App with purple artifact" src="../../_images/30-circleFit-CameraStream.png" style="width: 75%;" /></a>
<figcaption>
<p><span class="caption-text">Driver Station Camera Stream Image showing a successful Circle Fit</span><a class="headerlink" href="#id3" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>The Robot Controller (RC) device makes a video preview called <code class="docutils literal notranslate"><span class="pre">LiveView</span></code>. For a REV Control Hub, this video can be seen on an HDMI monitor <strong>or</strong> with open-source <a class="reference external" href="https://github.com/Genymobile/scrcpy">scrcpy</a> (called “screen copy”):</p>
<figure class="align-center" id="id4">
<a class="reference internal image-reference" href="../../_images/33-circleFit-LiveView.png"><img alt="Image showing RC Liveview of artifact with CircleFit" src="../../_images/33-circleFit-LiveView.png" style="width: 75%;" /></a>
<figcaption>
<p><span class="caption-text">Robot Controller <cite>LiveView</cite> showing a successful Circle Fit</span><a class="headerlink" href="#id4" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>For both previews, the <strong>white rectangle</strong> is the Region of Interest (ROI), and the thin <strong>green jagged line</strong> is the Blob’s contour (fully inside the ROI).</p>
<p>The <strong>yellow circle</strong> is the new <code class="docutils literal notranslate"><span class="pre">circleFit</span></code> : the smallest circle that encloses the contour.  The <code class="docutils literal notranslate"><span class="pre">circleFit</span></code> is not required to stay inside the ROI.</p>
</section>
<section id="basic-telemetry-data">
<h2>Basic Telemetry Data<a class="headerlink" href="#basic-telemetry-data" title="Permalink to this heading"></a></h2>
<p>Here again is some DS telemetry from the new <code class="docutils literal notranslate"><span class="pre">_Circle</span></code> Sample:</p>
<figure class="align-center" id="id5">
<a class="reference internal image-reference" href="../../_images/40-circleFit-telemetry-oval.png"><img alt="Image with a circle around the Circularity telemetry data" src="../../_images/40-circleFit-telemetry-oval.png" style="width: 75%;" /></a>
<figcaption>
<p><span class="caption-text">Driver Station Telemetry Data from <code class="docutils literal notranslate"><span class="pre">_Circle</span></code> sample</span><a class="headerlink" href="#id5" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>The <strong>first column</strong> shows the <strong>Circularity</strong> of the Blob contour (not its circleFit).  This is calculated from the Blob’s area and perimeter.  A higher value, closer to 1, indicates a more circular contour.</p>
<p>The <strong>second column</strong> shows the circleFit’s <strong>Radius</strong> , an indicator of size.  Again, the circleFit is not required to stay inside the ROI.</p>
<p>The <strong>third column</strong> shows the (X, Y) position of the circleFit’s <strong>Center</strong>.  With the origin at the full image’s top left corner, X increases to the right and Y increases downward.</p>
<p>The Blob’s <strong>Area</strong> is available but not displayed here.  The Sample OpMode uses a <strong>filter</strong> to show Blobs with area between 50 and 20,000 pixels.  Another filter shows Blobs with circularity greater than 0.6.  Filters can be customized, as described in the Sample’s comments.</p>
<p>For multiple Blobs, the Sample lists Telemetry using only the built-in default <strong>sort by area</strong> (largest is first).  Other sorting choices are available, described in the Sample’s comments.</p>
<p>The Blob’s <strong>Density</strong> is also available but not displayed here.  From the Sample’s comments:</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>A blob’s density is an indication of how “full” the contour is.  If you put a rubber band around the contour you would get the “Convex Hull” of the contour.  The density is the ratio of Contour-area to Convex Hull-area.</p>
</div>
</section>
<section id="using-circlefit-data">
<h2>Using CircleFit Data<a class="headerlink" href="#using-circlefit-data" title="Permalink to this heading"></a></h2>
<p>A team’s Autonomous code can evaluate circleFit data to navigate or guide the robot on the field.</p>
<p>The <strong>circleFit Radius</strong> (indicating size) can help estimate the <strong>distance</strong> from the camera lens to the Artifact.  Calibrate this at your home field, based on the known physical size of an Artifact.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Fortunately, a round ball gives no complications of <strong>perspective</strong>, like the tapered image of a rectangular object.  An unobstructed, well-lit Artifact can reliably appear as a circle.</p>
</div>
<p>The <strong>circleFit Center (X, Y)</strong> can help estimate the Artifact’s <strong>position</strong> relative to the camera on the robot.  Calibrate this at your home field, based on known test locations and distances.</p>
<p>With these estimates of distance and position, the robot can be programmed to approach and collect the Artifact, or perhaps navigate elsewhere on the field.</p>
</section>
<section id="manage-the-previews">
<h2>Manage the Previews<a class="headerlink" href="#manage-the-previews" title="Permalink to this heading"></a></h2>
<p>The FTC SDK handles the two preview shapes differently:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">boxFit</span></code> is enabled by default</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">circleFit</span></code> is disabled by default</p></li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">_Circle</span></code> sample <strong>turns off</strong> the <code class="docutils literal notranslate"><span class="pre">boxFit</span></code> with this Builder command:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="p">.</span><span class="na">setBoxFitColor</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="w">                            </span><span class="c1">// Disable the drawing of rectangles</span>
</pre></div>
</div>
<p>The “zero” is not a color, but an indicator to disable a preview drawing.</p>
<p>Conversely, the <code class="docutils literal notranslate"><span class="pre">_Circle</span></code> sample <strong>turns on</strong> the <code class="docutils literal notranslate"><span class="pre">circleFit</span></code> with this Builder command:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="p">.</span><span class="na">setCircleFitColor</span><span class="p">(</span><span class="n">Color</span><span class="p">.</span><span class="na">rgb</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="w"> </span><span class="mi">255</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">))</span><span class="w">    </span><span class="c1">// Enable the drawing of a circle around blobs</span>
</pre></div>
</div>
<p>This default color is yellow, but any color space and values may be specified.</p>
<p>Both previews can be disabled or enabled at the same time.  The default <code class="docutils literal notranslate"><span class="pre">boxFit</span></code> color can be modified from its default shade of red: <code class="docutils literal notranslate"><span class="pre">Color.rgb(255,</span> <span class="pre">120,</span> <span class="pre">31)</span></code>.</p>
</section>
<section id="manage-erode-and-dilate">
<h2>Manage Erode and Dilate<a class="headerlink" href="#manage-erode-and-dilate" title="Permalink to this heading"></a></h2>
<p>Erosion and Dilation are <strong>morphological</strong> operations: pre-processing steps to improve vision recognition.</p>
<figure class="align-center" id="id6">
<a class="reference internal image-reference" href="../../_images/60-circleFit-Dilate-Erode-1.png"><img alt="Examples of Dilation and Erosion" src="../../_images/60-circleFit-Dilate-Erode-1.png" style="width: 75%;" /></a>
<figcaption>
<p><span class="caption-text">Dilation and Erosion morphological operations</span><a class="headerlink" href="#id6" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>The Sample’s comments describe this Builder command:</p>
<blockquote>
<div><blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">.setMorphOperationType(MorphOperationType</span> <span class="pre">morphOperationType)</span></code>    This defines the order in which the Erode/Dilate actions are performed.</p>
</div></blockquote>
<ul class="simple">
<li><p>OPENING: Will Erode and then Dilate which will make small noise blobs go away</p></li>
<li><p>CLOSING: Will Dilate and then Erode which will tend to fill in any small holes in blob edges.</p></li>
</ul>
</div></blockquote>
<figure class="align-center" id="id7">
<a class="reference internal image-reference" href="../../_images/63-circleFit-Dilate-Erode-2.png"><img alt="Dilation and Erosion examples using a sample image" src="../../_images/63-circleFit-Dilate-Erode-2.png" style="width: 75%;" /></a>
<figcaption>
<p><span class="caption-text">Dilation and Erosion examples using an image</span><a class="headerlink" href="#id7" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>The original <code class="docutils literal notranslate"><span class="pre">_Rectangle</span></code> Sample used “Erode then Dilate”, effective for most applications.  This new <code class="docutils literal notranslate"><span class="pre">_Circle</span></code> Sample uses “Dilate then Erode”, which improves detection of a DECODE Artifact (smoothes edges of its large holes).  It also uses Erode and Dilate sizes of 15 pixels, larger than typical 5 pixels.</p>
</section>
<section id="improving-results">
<h2>Improving Results<a class="headerlink" href="#improving-results" title="Permalink to this heading"></a></h2>
<p>FTC teams can adjust settings to improve results based on:</p>
<ul class="simple">
<li><p>webcam model</p></li>
<li><p>webcam position on robot (lookdown angle)</p></li>
<li><p>Artifact clustering or blocked views</p></li>
<li><p>planned method of approach and collection</p></li>
<li><p>game strategy (which Artifacts, from which positions)</p></li>
<li><p>possible presence of other robots</p></li>
<li><p>static vs. moving targets</p></li>
<li><p>venue lighting and potential shadowing</p></li>
<li><p>OpMode loop rate</p></li>
</ul>
<p>In the case of adjacent or overlapping Artifacts, <code class="docutils literal notranslate"><span class="pre">boxFit</span></code> might offer more useful data than <code class="docutils literal notranslate"><span class="pre">circleFit</span></code>.</p>
<p>The new <code class="docutils literal notranslate"><span class="pre">_Circle</span></code> Sample offers all of the settings from the <code class="docutils literal notranslate"><span class="pre">_Rectangle</span></code> Sample.  These can be adjusted for different results:</p>
<ul class="simple">
<li><p>camera resolution, default 320x240</p></li>
<li><p>Region of Interest, default central 3/4</p></li>
<li><p>target color range, predefined or custom</p></li>
<li><p>type of contour, default External Only</p></li>
<li><p>preview drawings, including circleFit and/or boxFit</p></li>
<li><p>Blur size, default 5 pixels</p></li>
<li><p>Erode size, default 15 pixels</p></li>
<li><p>Dilate size, default 15 pixels</p></li>
<li><p>order of operation, default Dilate then Erode</p></li>
</ul>
<p>Results can be <strong>filtered</strong> in multiple ways:</p>
<ul class="simple">
<li><p>Contour Area</p></li>
<li><p>Density</p></li>
<li><p>Aspect Ratio (for boxFit)</p></li>
<li><p>Arc Length</p></li>
<li><p>Circularity</p></li>
</ul>
<p>Telemetry Results can be <strong>sorted</strong> by any of the above attributes.  See the Sample’s comments for guidance.</p>
</section>
<section id="lighting-challenges">
<h2>Lighting Challenges<a class="headerlink" href="#lighting-challenges" title="Permalink to this heading"></a></h2>
<p>Robotics vision is highly sensitive to field lighting.  The FTC VisionPortal offers software tools called Camera Controls to help address varying or “difficult” lighting conditions.</p>
<p>If needed, see the separate tutorial called <a class="reference internal" href="../../apriltag/vision_portal/visionportal_camera_controls/visionportal-camera-controls.html#visionportal-camera-controls"><span class="std std-ref">FTC VisionPortal Camera Controls</span></a>.</p>
<p>More detail on these controls is provided in an <a class="reference internal" href="../../programming_resources/vision/webcam_controls/index.html#webcam-controls"><span class="std std-ref">older tutorial - ftc-docs Webcam Controls</span></a>; disregard the TensorFlow references.</p>
<p>These tools can help with Color Processing <strong>and</strong> AprilTag Detection.</p>
<p>Lastly, some webcams perform <strong>automatic color correction</strong>, under changing lighting conditions.  If you observe this in Previews, make adjustments as needed.</p>
</section>
<section id="opmode-development">
<h2>OpMode Development<a class="headerlink" href="#opmode-development" title="Permalink to this heading"></a></h2>
<p>You should eventually use or adapt program elements from the Color Locator <code class="docutils literal notranslate"><span class="pre">_Circle</span></code> or <code class="docutils literal notranslate"><span class="pre">_Rectangle</span></code> Sample, to become part of your team’s Autonomous (or TeleOp) OpMode.</p>
<p>An early choice is: <strong>how long</strong> should the processing (looping) continue, before using the extracted data for robot action?  What should be the criteria to <strong>exit a loop</strong>, and which data should be used for subsequent calculations and movement?</p>
<p>You may find it useful to learn about <strong>Datalogging</strong>.  Output this OpMode’s Color Processor data to a file, then perhaps to a spreadsheet.  Careful review may reveal which data are useful, rather than trying to observe the “jumpy” preview and Telemetry results.</p>
<p>Also, you may want to <strong>track multiple colors</strong>, like this:</p>
<figure class="align-center" id="id8">
<a class="reference internal image-reference" href="../../_images/70-circleFit-multiple-colors.png"><img alt="Example image of tracking multiple colors in a single ROI" src="../../_images/70-circleFit-multiple-colors.png" style="width: 75%;" /></a>
<figcaption>
<p><span class="caption-text">Tracking multiple colors within a single ROI</span><a class="headerlink" href="#id8" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>This is quite possible, by setting up multiple processors, all incorporated into the Vision Portal.  You may find it helpful to first organize the Sample OpMode into methods (or Functions for FTC Blocks): one for the processor and one for Telemetry.  Then it should be straightforward to create parallel methods or Functions.</p>
</section>
<section id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Permalink to this heading"></a></h2>
<p>FTC’s “Color Locator” now offers a best-fit circle called <code class="docutils literal notranslate"><span class="pre">circleFit</span></code>, an alternate to the best-fit rectangle (“boxFit”) described in previous sections of this tutorial.</p>
<p>This new feature is shown in the Sample OpMode called <code class="docutils literal notranslate"><span class="pre">ConceptVisionColorLocator_Circle</span></code>, in FTC Blocks and Java.  This sample exists alongside the existing <code class="docutils literal notranslate"><span class="pre">_Rectangle</span></code> Sample OpMode.</p>
<p>The new <code class="docutils literal notranslate"><span class="pre">_Circle</span></code> Sample uses certain settings for convenient processing of DECODE Artifacts, as a starting point for teams.  Many choices are provided to optimize results for a team’s robot and strategy.</p>
<p>This ends the tutorial’s 4 pages on ColorLocator:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../color-locator-discover/color-locator-discover.html"><span class="doc">Discover</span></a>,</p></li>
<li><p><a class="reference internal" href="../color-locator-explore/color-locator-explore.html"><span class="doc">Explore</span></a>,</p></li>
<li><p><a class="reference internal" href="../color-locator-challenge/color-locator-challenge.html"><span class="doc">Challenge</span></a>,</p></li>
<li><p><strong>Round Blobs</strong> (this document)</p></li>
</ul>
<p>The final page of this tutorial provides optional info on <a class="reference internal" href="../color-spaces/color-spaces.html"><span class="doc">Color Spaces</span></a>.</p>
<p>Best of luck as you apply these tools to your Autonomous and TeleOp OpModes!</p>
<hr class="docutils" />
<p>Questions, comments and corrections to <a class="reference external" href="mailto:westsiderobotics&#37;&#52;&#48;verizon&#46;net">westsiderobotics<span>&#64;</span>verizon<span>&#46;</span>net</a></p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../color-locator-challenge/color-locator-challenge.html" class="btn btn-neutral float-left" title="Color Locator (Challenge)" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../color-spaces/color-spaces.html" class="btn btn-neutral float-right" title="Color Spaces" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo" style="display: flex">
  
    <div id="container" style="width: 50%; white-space:nowrap;">

      <div>
        &#169; 2025 <i>FIRST</i>
      </div>

      <div>
        <p><a href="../../tos/tos.html">Terms of Service</a></p>
      </div>
      <div>
        <p><a class="external" href="https://www.firstinspires.org/privacy-policy">Privacy Policy</a></p>
      </div>
      <div>
        <p><a class="external" href="https://www.firstinspires.org/programs/youth-protection-program">Report an Incident</a></p>
      </div>

      <div>
      </div>
    </div>

    <div align="right" style='flex-grow:1; text-align: right'>
      Season Presenting Sponsor
      <figure>
        <img src="../../_static/RTX.png" alt="RTX" class="invert-img" width="200" align="right"/>
      </figure>
    </div>
  </div>
<!--
  <div> 
  </div>
  -->
</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

</body>
</html>